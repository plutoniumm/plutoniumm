import{S as ee,i as re,s as ae,a as ne,e as Y,c as oe,b as at,g as $t,t as Z,d as Et,f as tt,h as et,j as se,o as Tt,k as ie,l as le,m as ce,n as kt,p as K,q as ue,r as de,u as fe,v as st,w as it,x as Ct,y as lt,z as ct,A as wt}from"./chunks/index-50681c01.js";import{S as te,I as W,g as zt,f as Ht,a as Lt,b as vt,s as X,i as Kt,c as bt,P as Wt,d as pe,e as he,h as me}from"./chunks/singletons-81f03c01.js";import{_ as ot}from"./chunks/preload-helper-5e4dbdac.js";function ge(c){for(const t in c)c[t]=decodeURIComponent(c[t]);return c}const ye=["href","pathname","search","searchParams","toString","toJSON"];function we(c,t){const a=new URL(c);for(const u of ye){let l=a[u];Object.defineProperty(a,u,{get:()=>(t(),l),enumerable:!0,configurable:!0})}return function(u){Object.defineProperty(u,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}(a),a}const ve="/__data.json",_t=window.fetch;window.fetch=(c,t)=>((c instanceof Request?c.method:(t==null?void 0:t.method)||"GET")!=="GET"&&pt.delete(jt(c)),_t(c,t));const pt=new Map;function jt(c,t){let a=`script[data-sveltekit-fetched][data-url=${JSON.stringify(c instanceof Request?c.url:c)}]`;return t!=null&&t.body&&(typeof t.body=="string"||ArrayBuffer.isView(t.body))&&(a+=`[data-hash="${function(u){let l=5381;if(typeof u=="string"){let m=u.length;for(;m;)l=33*l^u.charCodeAt(--m)}else{if(!ArrayBuffer.isView(u))throw new TypeError("value must be a string or TypedArray");{const m=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);let o=m.length;for(;o;)l=33*l^m[--o]}}return(l>>>0).toString(36)}(t.body)}"]`),a}const be=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function _e(c){const t=[];var a;return{pattern:c==="/"?/^\/$/:new RegExp(`^${(a=c,a.slice(1).split("/").filter($e)).map(u=>{const l=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(u);if(l)return t.push({name:l[1],matcher:l[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const m=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(u);if(m)return t.push({name:m[1],matcher:m[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!u)return;const o=u.split(/\[(.+?)\](?!\])/);return"/"+o.map((i,S)=>{if(S%2){if(i.startsWith("x+"))return At(String.fromCharCode(parseInt(i.slice(2),16)));if(i.startsWith("u+"))return At(String.fromCharCode(...i.slice(2).split("-").map(_=>parseInt(_,16))));const b=be.exec(i);if(!b)throw new Error(`Invalid param: ${i}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,h,x,g,M]=b;return t.push({name:g,matcher:M,optional:!!h,rest:!!x,chained:!!x&&S===1&&o[0]===""}),x?"(.*?)":h?"([^/]*)?":"([^/]+?)"}return At(i)}).join("")}).join("")}/?$`),params:t}}function $e(c){return!/^\([^)]+\)$/.test(c)}function At(c){return c.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function Ee(c){let t,a,u;var l=c[0][0];function m(o){return{props:{data:o[2],form:o[1]}}}return l&&(t=st(l,m(c))),{c(){t&&it(t.$$.fragment),a=Y()},l(o){t&&Ct(t.$$.fragment,o),a=Y()},m(o,i){t&&lt(t,o,i),at(o,a,i),u=!0},p(o,i){const S={};if(4&i&&(S.data=o[2]),2&i&&(S.form=o[1]),l!==(l=o[0][0])){if(t){$t();const b=t;Z(b.$$.fragment,1,0,()=>{ct(b,1)}),Et()}l?(t=st(l,m(o)),it(t.$$.fragment),tt(t.$$.fragment,1),lt(t,a.parentNode,a)):t=null}else l&&t.$set(S)},i(o){u||(t&&tt(t.$$.fragment,o),u=!0)},o(o){t&&Z(t.$$.fragment,o),u=!1},d(o){o&&et(a),t&&ct(t,o)}}}function Se(c){let t,a,u;var l=c[0][0];function m(o){return{props:{data:o[2],$$slots:{default:[xe]},$$scope:{ctx:o}}}}return l&&(t=st(l,m(c))),{c(){t&&it(t.$$.fragment),a=Y()},l(o){t&&Ct(t.$$.fragment,o),a=Y()},m(o,i){t&&lt(t,o,i),at(o,a,i),u=!0},p(o,i){const S={};if(4&i&&(S.data=o[2]),523&i&&(S.$$scope={dirty:i,ctx:o}),l!==(l=o[0][0])){if(t){$t();const b=t;Z(b.$$.fragment,1,0,()=>{ct(b,1)}),Et()}l?(t=st(l,m(o)),it(t.$$.fragment),tt(t.$$.fragment,1),lt(t,a.parentNode,a)):t=null}else l&&t.$set(S)},i(o){u||(t&&tt(t.$$.fragment,o),u=!0)},o(o){t&&Z(t.$$.fragment,o),u=!1},d(o){o&&et(a),t&&ct(t,o)}}}function xe(c){let t,a,u;var l=c[0][1];function m(o){return{props:{data:o[3],form:o[1]}}}return l&&(t=st(l,m(c))),{c(){t&&it(t.$$.fragment),a=Y()},l(o){t&&Ct(t.$$.fragment,o),a=Y()},m(o,i){t&&lt(t,o,i),at(o,a,i),u=!0},p(o,i){const S={};if(8&i&&(S.data=o[3]),2&i&&(S.form=o[1]),l!==(l=o[0][1])){if(t){$t();const b=t;Z(b.$$.fragment,1,0,()=>{ct(b,1)}),Et()}l?(t=st(l,m(o)),it(t.$$.fragment),tt(t.$$.fragment,1),lt(t,a.parentNode,a)):t=null}else l&&t.$set(S)},i(o){u||(t&&tt(t.$$.fragment,o),u=!0)},o(o){t&&Z(t.$$.fragment,o),u=!1},d(o){o&&et(a),t&&ct(t,o)}}}function Qt(c){let t,a=c[5]&&Xt(c);return{c(){t=ie("div"),a&&a.c(),this.h()},l(u){t=le(u,"DIV",{id:!0,"aria-live":!0,"aria-atomic":!0,style:!0});var l=ce(t);a&&a.l(l),l.forEach(et),this.h()},h(){kt(t,"id","svelte-announcer"),kt(t,"aria-live","assertive"),kt(t,"aria-atomic","true"),K(t,"position","absolute"),K(t,"left","0"),K(t,"top","0"),K(t,"clip","rect(0 0 0 0)"),K(t,"clip-path","inset(50%)"),K(t,"overflow","hidden"),K(t,"white-space","nowrap"),K(t,"width","1px"),K(t,"height","1px")},m(u,l){at(u,t,l),a&&a.m(t,null)},p(u,l){u[5]?a?a.p(u,l):(a=Xt(u),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(u){u&&et(t),a&&a.d()}}}function Xt(c){let t;return{c(){t=ue(c[6])},l(a){t=de(a,c[6])},m(a,u){at(a,t,u)},p(a,u){64&u&&fe(t,a[6])},d(a){a&&et(t)}}}function Re(c){let t,a,u,l,m;const o=[Se,Ee],i=[];function S(h,x){return h[0][1]?0:1}t=S(c),a=i[t]=o[t](c);let b=c[4]&&Qt(c);return{c(){a.c(),u=ne(),b&&b.c(),l=Y()},l(h){a.l(h),u=oe(h),b&&b.l(h),l=Y()},m(h,x){i[t].m(h,x),at(h,u,x),b&&b.m(h,x),at(h,l,x),m=!0},p(h,[x]){let g=t;t=S(h),t===g?i[t].p(h,x):($t(),Z(i[g],1,1,()=>{i[g]=null}),Et(),a=i[t],a?a.p(h,x):(a=i[t]=o[t](h),a.c()),tt(a,1),a.m(u.parentNode,u)),h[4]?b?b.p(h,x):(b=Qt(h),b.c(),b.m(l.parentNode,l)):b&&(b.d(1),b=null)},i(h){m||(tt(a),m=!0)},o(h){Z(a),m=!1},d(h){i[t].d(h),h&&et(u),b&&b.d(h),h&&et(l)}}}function ke(c,t,a){let{stores:u}=t,{page:l}=t,{components:m}=t,{form:o}=t,{data_0:i=null}=t,{data_1:S=null}=t;se(u.page.notify);let b=!1,h=!1,x=null;return Tt(()=>{const g=u.page.subscribe(()=>{b&&(a(5,h=!0),a(6,x=document.title||"untitled page"))});return a(4,b=!0),g}),c.$$set=g=>{"stores"in g&&a(7,u=g.stores),"page"in g&&a(8,l=g.page),"components"in g&&a(0,m=g.components),"form"in g&&a(1,o=g.form),"data_0"in g&&a(2,i=g.data_0),"data_1"in g&&a(3,S=g.data_1)},c.$$.update=()=>{384&c.$$.dirty&&u.page.set(l)},[m,o,i,S,b,h,x,u,l]}class Le extends ee{constructor(t){super(),re(this,t,ke,Re,ae,{stores:7,page:8,components:0,form:1,data_0:2,data_1:3})}}const St=[()=>ot(()=>import("./chunks/0-74b8f434.js"),["./chunks/0-74b8f434.js","./chunks/_layout-8b3d678d.js","./components/pages/_layout.svelte-d60c86ef.js","./chunks/index-50681c01.js","./assets/_layout-1548f59b.css"],import.meta.url),()=>ot(()=>import("./chunks/1-51a3b7a9.js"),["./chunks/1-51a3b7a9.js","./components/error.svelte-990b115a.js","./chunks/index-50681c01.js","./chunks/singletons-81f03c01.js"],import.meta.url),()=>ot(()=>import("./chunks/2-8b1c8c35.js"),["./chunks/2-8b1c8c35.js","./components/pages/_page.svelte-14a16747.js","./chunks/index-50681c01.js","./assets/_page-f243fe6b.css"],import.meta.url),()=>ot(()=>import("./chunks/3-52e4338c.js"),["./chunks/3-52e4338c.js","./components/pages/notes/_page.svelte-a07d6ebf.js","./chunks/index-50681c01.js","./assets/_page-4502ac7c.css"],import.meta.url),()=>ot(()=>import("./chunks/4-96fea147.js"),["./chunks/4-96fea147.js","./chunks/_page-9ace1fb0.js","./chunks/preload-helper-5e4dbdac.js","./components/pages/notes/_...slug_/_page.svelte-17da1da5.js","./chunks/index-50681c01.js","./assets/_page-7bd558b6.css"],import.meta.url),()=>ot(()=>import("./chunks/5-fd3ef7aa.js"),["./chunks/5-fd3ef7aa.js","./components/pages/papers/_page.svelte-394ce589.js","./chunks/index-50681c01.js","./assets/_page-3ed8ecad.css"],import.meta.url)],Ae={handleError:({error:c})=>{console.error(c)}};let Dt=class{constructor(c,t){this.status=c,this.body=typeof t=="string"?{message:t}:t||{message:`Error: ${c}`}}toString(){return JSON.stringify(this.body)}},Yt=class{constructor(c,t){this.status=c,this.location=t}};Object.getOwnPropertyNames(Object.prototype).sort().join("\0");const Pe=-1,Oe=-2,Ue=-3,Ie=-4,Te=-5,je=-6;function Pt(c){const t=new Set(c);return function(a,u){if(a){for(const l in a)if(l[0]!=="_"&&!t.has(l)){const m=c.join(", ");throw new Error(`Invalid export '${l}'${u?` in ${u}`:""} (valid exports are ${m}, or anything with a '_' prefix)`)}}}}Pt(["load","prerender","csr","ssr","trailingSlash"]),Pt(["load","prerender","csr","ssr","actions","trailingSlash"]),Pt(["GET","POST","PATCH","PUT","DELETE","prerender","trailingSlash"]);const Ot=function(c,t,a,u){const l=new Set(t);return Object.entries(a).map(([i,[S,b,h]])=>{const{pattern:x,params:g}=_e(i),M={id:i,exec:_=>{const L=x.exec(_);if(L)return function(V,j,rt){const F={},O=V.slice(1);let G="";for(let J=0;J<j.length;J+=1){const q=j[J];let z=O[J];if(q.chained&&q.rest&&G&&(z=z?G+"/"+z:G),G="",z===void 0)q.rest&&(F[q.name]="");else{if(q.matcher&&!rt[q.matcher](z)){if(q.optional&&q.chained){let Q=O.indexOf(void 0,J);if(Q===-1){const H=j[J+1];if(!(H!=null&&H.rest)||!H.chained)return;G=z}for(;Q>=J;)O[Q]=O[Q-1],Q-=1;continue}return}F[q.name]=z}}if(!G)return F}(L,g,u)},errors:[1,...h||[]].map(_=>c[_]),layouts:[0,...b||[]].map(o),leaf:m(S)};return M.errors.length=M.layouts.length=Math.max(M.errors.length,M.layouts.length),M});function m(i){const S=i<0;return S&&(i=~i),[S,c[i]]}function o(i){return i===void 0?i:[l.has(i),c[i]]}}(St,[],{"/":[2],"/notes":[-4],"/notes/[...slug]":[-5],"/papers":[5]},{}),Nt=St[0],Vt=St[1];Nt(),Vt();let ht={};try{ht=JSON.parse(sessionStorage[te])}catch{}function Ut(c){ht[c]=bt()}function De({target:c,base:t}){var Jt;const a=document.documentElement,u=[];let l=null;const m={before_navigate:[],after_navigate:[]};let o,i={branch:[],error:null,url:null},S=!1,b=!1,h=!0,x=!1,g=!1,M=!1,_=!1,L=(Jt=history.state)==null?void 0:Jt[W];L||(L=Date.now(),history.replaceState({...history.state,[W]:L},"",location.href));const V=ht[L];let j,rt,F;async function O(){F=F||Promise.resolve(),await F,F=null;const e=new URL(location.href),r=gt(e,!0);l=null,await z(r,e,[])}async function G(e,{noScroll:r=!1,replaceState:s=!1,keepFocus:n=!1,state:d={},invalidateAll:p=!1},f,v){return typeof e=="string"&&(e=new URL(e,zt(document))),yt({url:e,scroll:r?bt():null,keepfocus:n,redirect_chain:f,details:{state:d,replaceState:s},nav_token:v,accepted:()=>{p&&(_=!0)},blocked:()=>{},type:"goto"})}async function J(e){const r=gt(e,!1);if(!r)throw new Error(`Attempted to preload a URL that does not belong to this app: ${e}`);return l={id:r.id,promise:Mt(r).then(s=>(s.type==="loaded"&&s.state.error&&(l=null),s))},l.promise}async function q(...e){const r=Ot.filter(s=>e.some(n=>s.exec(n))).map(s=>Promise.all([...s.layouts,s.leaf].map(n=>n==null?void 0:n[1]())));await Promise.all(r)}async function z(e,r,s,n,d={},p){var v,y;rt=d;let f=e&&await Mt(e);if(f||(f=await Gt(r,{id:null},await ft(new Error(`Not found: ${r.pathname}`),{url:r,params:{},route:{id:null}}),404)),r=(e==null?void 0:e.url)||r,rt!==d)return!1;if(f.type==="redirect"){if(!(s.length>10||s.includes(r.pathname)))return G(new URL(f.location,r).href,{},[...s,r.pathname],d),!1;f=await mt({status:500,error:await ft(new Error("Redirect loop"),{url:r,params:{},route:{id:null}}),url:r,route:{id:null}})}else((y=(v=f.props)==null?void 0:v.page)==null?void 0:y.status)>=400&&await X.updated.check()&&await ut(r);if(u.length=0,_=!1,x=!0,n&&n.details){const{details:w}=n,P=w.replaceState?0:1;w.state[W]=L+=P,history[w.replaceState?"replaceState":"pushState"](w.state,"",r)}if(l=null,b?(i=f.state,f.props.page&&(f.props.page.url=r),o.$set(f.props)):Q(f),n){const{scroll:w,keepfocus:P}=n,{activeElement:U}=document;await wt();const C=document.activeElement!==U&&document.activeElement!==document.body;if(P||C||await It(),h){const D=r.hash&&document.getElementById(r.hash.slice(1));w?scrollTo(w.x,w.y):D?D.scrollIntoView():scrollTo(0,0)}}else await wt();h=!0,f.props.page&&(j=f.props.page),p&&p(),x=!1}function Q(e){var n;i=e.state;const r=document.querySelector("style[data-sveltekit]");r&&r.remove(),j=e.props.page,o=new Le({target:c,props:{...e.props,stores:X},hydrate:!0});const s={from:null,to:{params:i.params,route:{id:((n=i.route)==null?void 0:n.id)??null},url:new URL(location.href)},willUnload:!1,type:"enter"};m.after_navigate.forEach(d=>d(s)),b=!0}async function H({url:e,params:r,branch:s,status:n,error:d,route:p,form:f}){let v="never";for(const R of s)(R==null?void 0:R.slash)!==void 0&&(v=R.slash);var y,w;e.pathname=(y=e.pathname,w=v,y==="/"||w==="ignore"?y:w==="never"?y.endsWith("/")?y.slice(0,-1):y:w!=="always"||y.endsWith("/")?y:y+"/"),e.search=e.search;const P={type:"loaded",state:{url:e,params:r,branch:s,error:d,route:p},props:{components:(U=s,U.filter(R=>R!=null)).map(R=>R.node.component)}};var U;f!==void 0&&(P.props.form=f);let C={},D=!j,$=0;for(let R=0;R<Math.max(s.length,i.branch.length);R+=1){const I=s[R],E=i.branch[R];(I==null?void 0:I.data)!==(E==null?void 0:E.data)&&(D=!0),I&&(C={...C,...I.data},D&&(P.props[`data_${$}`]=C),$+=1)}return(!i.url||e.href!==i.url.href||i.error!==d||f!==void 0&&f!==j.form||D)&&(P.props.page={error:d,params:r,route:{id:(p==null?void 0:p.id)??null},status:n,url:new URL(e),form:f??null,data:D?C:j.data}),P}async function xt({loader:e,parent:r,url:s,params:n,route:d,server_data_node:p}){var w,P,U;let f=null;const v={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},y=await e();if((w=y.universal)!=null&&w.load){let C=function(...$){for(const R of $){const{href:I}=new URL(R,s);v.dependencies.add(I)}};const D={route:{get id(){return v.route=!0,d.id}},params:new Proxy(n,{get:($,R)=>(v.params.add(R),$[R])}),data:(p==null?void 0:p.data)??null,url:we(s,()=>{v.url=!0}),async fetch($,R){let I;$ instanceof Request?(I=$.url,R={body:$.method==="GET"||$.method==="HEAD"?void 0:await $.blob(),cache:$.cache,credentials:$.credentials,headers:$.headers,integrity:$.integrity,keepalive:$.keepalive,method:$.method,mode:$.mode,redirect:$.redirect,referrer:$.referrer,referrerPolicy:$.referrerPolicy,signal:$.signal,...R}):I=$;const E=new URL(I,s).href;return C(E),b?function(A,T,k){if(pt.size>0){const N=jt(A,k),B=pt.get(N);if(B){if(performance.now()<B.ttl&&["default","force-cache","only-if-cached",void 0].includes(k==null?void 0:k.cache))return new Response(B.body,B.init);pt.delete(N)}}return _t(T,k)}(I,E,R):function(A,T){const k=jt(A,T),N=document.querySelector(k);if(N!=null&&N.textContent){const{body:B,...dt}=JSON.parse(N.textContent),nt=N.getAttribute("data-ttl");return nt&&pt.set(k,{body:B,init:dt,ttl:1e3*Number(nt)}),Promise.resolve(new Response(B,dt))}return _t(A,T)}(I,R)},setHeaders:()=>{},depends:C,parent:()=>(v.parent=!0,r())};f=await y.universal.load.call(null,D)??null,f=f?await async function($){var R;for(const I in $)if(typeof((R=$[I])==null?void 0:R.then)=="function")return Object.fromEntries(await Promise.all(Object.entries($).map(async([E,A])=>[E,await A])));return $}(f):null}return{node:y,loader:e,server:p,universal:(P=y.universal)!=null&&P.load?{type:"data",data:f,uses:v}:null,data:f??(p==null?void 0:p.data)??null,slash:((U=y.universal)==null?void 0:U.trailingSlash)??(p==null?void 0:p.slash)}}function qt(e,r,s,n,d){if(_)return!0;if(!n)return!1;if(n.parent&&e||n.route&&r||n.url&&s)return!0;for(const p of n.params)if(d[p]!==i.params[p])return!0;for(const p of n.dependencies)if(u.some(f=>f(new URL(p))))return!0;return!1}function Rt(e,r){return(e==null?void 0:e.type)==="data"?{type:"data",data:e.data,uses:{dependencies:new Set(e.uses.dependencies??[]),params:new Set(e.uses.params??[]),parent:!!e.uses.parent,route:!!e.uses.route,url:!!e.uses.url},slash:e.slash}:(e==null?void 0:e.type)==="skip"?r??null:null}async function Mt({id:e,invalidating:r,url:s,params:n,route:d}){if((l==null?void 0:l.id)===e)return l.promise;const{errors:p,layouts:f,leaf:v}=d,y=[...f,v];p.forEach(E=>E==null?void 0:E().catch(()=>{})),y.forEach(E=>E==null?void 0:E[1]().catch(()=>{}));let w=null;const P=!!i.url&&e!==i.url.pathname+i.url.search,U=!!i.route&&d.id!==i.route.id,C=y.reduce((E,A,T)=>{var B;const k=i.branch[T],N=!!(A!=null&&A[0])&&((k==null?void 0:k.loader)!==A[1]||qt(E.some(Boolean),U,P,(B=k.server)==null?void 0:B.uses,n));return E.push(N),E},[]);if(C.some(Boolean)){try{w=await Zt(s,C)}catch(E){return mt({status:500,error:await ft(E,{url:s,params:n,route:{id:d.id}}),url:s,route:d})}if(w.type==="redirect")return w}const D=w==null?void 0:w.nodes;let $=!1;const R=y.map(async(E,A)=>{var N;if(!E)return;const T=i.branch[A],k=D==null?void 0:D[A];if(!(k&&k.type!=="skip"||E[1]!==(T==null?void 0:T.loader)||qt($,U,P,(N=T.universal)==null?void 0:N.uses,n)))return T;if($=!0,(k==null?void 0:k.type)==="error")throw k;return xt({loader:E[1],url:s,params:n,route:d,parent:async()=>{var dt;const B={};for(let nt=0;nt<A;nt+=1)Object.assign(B,(dt=await R[nt])==null?void 0:dt.data);return B},server_data_node:Rt(k===void 0&&E[0]?{type:"skip"}:k??null,T==null?void 0:T.server)})});for(const E of R)E.catch(()=>{});const I=[];for(let E=0;E<y.length;E+=1)if(y[E])try{I.push(await R[E])}catch(A){if(A instanceof Yt)return{type:"redirect",location:A.location};let T,k=500;if(D!=null&&D.includes(A))k=A.status??k,T=A.error;else if(A instanceof Dt)k=A.status,T=A.body;else{if(await X.updated.check())return await ut(s);T=await ft(A,{params:n,url:s,route:{id:d.id}})}const N=await Bt(E,I,p);return N?await H({url:s,params:n,branch:I.slice(0,N.idx).concat(N.node),status:k,error:T,route:d}):await Gt(s,{id:d.id},T,k)}else I.push(void 0);return await H({url:s,params:n,branch:I,status:200,error:null,route:d,form:r?void 0:null})}async function Bt(e,r,s){for(;e--;)if(s[e]){let n=e;for(;!r[n];)n-=1;try{return{idx:n+1,node:{node:await s[e](),loader:s[e],data:{},server:null,universal:null}}}catch{continue}}}async function mt({status:e,error:r,url:s,route:n}){const d={};let p=null;if((await Nt()).has_server_load)try{const y=await Zt(s,[!0]);if(y.type!=="data"||y.nodes[0]&&y.nodes[0].type!=="data")throw 0;p=y.nodes[0]??null}catch{(s.origin!==location.origin||s.pathname!==location.pathname||S)&&await ut(s)}const f=await xt({loader:Nt,url:s,params:d,route:n,parent:()=>Promise.resolve({}),server_data_node:Rt(p)}),v={node:await Vt(),loader:Vt,universal:null,server:null,data:null};return await H({url:s,params:d,branch:[f,v],status:e,error:r,route:null})}function gt(e,r){if(Kt(e,t))return;const s=(e.pathname.slice(t.length)||"/").split("%25").map(decodeURI).join("%25");for(const n of Ot){const d=n.exec(s);if(d)return{id:e.pathname+e.search,invalidating:r,route:n,params:ge(d),url:e}}}function Ft({url:e,type:r,intent:s,delta:n}){var v,y;let d=!1;const p={from:{params:i.params,route:{id:((v=i.route)==null?void 0:v.id)??null},url:i.url},to:{params:(s==null?void 0:s.params)??null,route:{id:((y=s==null?void 0:s.route)==null?void 0:y.id)??null},url:e},willUnload:!s,type:r};n!==void 0&&(p.delta=n);const f={...p,cancel:()=>{d=!0}};return g||m.before_navigate.forEach(w=>w(f)),d?null:p}async function yt({url:e,scroll:r,keepfocus:s,redirect_chain:n,details:d,type:p,delta:f,nav_token:v,accepted:y,blocked:w}){const P=gt(e,!1),U=Ft({url:e,type:p,delta:f,intent:P});U?(Ut(L),y(),g=!0,b&&X.navigating.set(U),await z(P,e,n,{scroll:r,keepfocus:s,details:d},v,()=>{g=!1,m.after_navigate.forEach(C=>C(U)),X.navigating.set(null)})):w()}async function Gt(e,r,s,n){return e.origin!==location.origin||e.pathname!==location.pathname||S?await ut(e):await mt({status:n,error:s,url:e,route:r})}function ut(e){return location.href=e.href,new Promise(()=>{})}return V&&(history.scrollRestoration="manual",scrollTo(V.x,V.y)),{after_navigate:e=>{Tt(()=>(m.after_navigate.push(e),()=>{const r=m.after_navigate.indexOf(e);m.after_navigate.splice(r,1)}))},before_navigate:e=>{Tt(()=>(m.before_navigate.push(e),()=>{const r=m.before_navigate.indexOf(e);m.before_navigate.splice(r,1)}))},disable_scroll_handling:()=>{!x&&b||(h=!1)},goto:(e,r={})=>G(e,r,[]),invalidate:e=>{if(typeof e=="function")u.push(e);else{const{href:r}=new URL(e,location.href);u.push(s=>s.href===r)}return O()},invalidateAll:()=>(_=!0,O()),preload_data:async e=>{const r=new URL(e,zt(document));await J(r)},preload_code:q,apply_action:async e=>{if(e.type==="error"){const r=new URL(location.href),{branch:s,route:n}=i;if(!n)return;const d=await Bt(i.branch.length,s,n.errors);if(d){const p=await H({url:r,params:i.params,branch:s.slice(0,d.idx).concat(d.node),status:e.status??500,error:e.error,route:n});i=p.state,o.$set(p.props),wt().then(It)}}else if(e.type==="redirect")G(e.location,{invalidateAll:!0},[]);else{const r={form:e.data,page:{...j,form:e.data,status:e.status}};o.$set(r),e.type==="success"&&wt().then(It)}},_start_router:()=>{var e;history.scrollRestoration="manual",addEventListener("beforeunload",r=>{var n;let s=!1;if(!g){const d={from:{params:i.params,route:{id:((n=i.route)==null?void 0:n.id)??null},url:i.url},to:null,willUnload:!0,type:"leave",cancel:()=>s=!0};m.before_navigate.forEach(p=>p(d))}s?(r.preventDefault(),r.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{if(document.visibilityState==="hidden"){Ut(L);try{sessionStorage[te]=JSON.stringify(ht)}catch{}}}),(e=navigator.connection)!=null&&e.saveData||function(){let r;function s(f){d(f.composedPath()[0],1)}a.addEventListener("mousemove",f=>{const v=f.target;clearTimeout(r),r=setTimeout(()=>{d(v,2)},20)}),a.addEventListener("mousedown",s),a.addEventListener("touchstart",s,{passive:!0});const n=new IntersectionObserver(f=>{for(const v of f)v.isIntersecting&&(q(new URL(v.target.href).pathname),n.unobserve(v.target))},{threshold:0});function d(f,v){const y=Ht(f,a);if(!y)return;const{url:w,external:P}=Lt(y,t);if(P)return;const U=vt(y);U.reload||(v<=U.preload_data?J(w):v<=U.preload_code&&q(w.pathname))}function p(){n.disconnect();for(const f of a.querySelectorAll("a")){const{url:v,external:y}=Lt(f,t);if(y)continue;const w=vt(f);w.reload||(w.preload_code===Wt.viewport&&n.observe(f),w.preload_code===Wt.eager&&q(v.pathname))}}m.after_navigate.push(p),p()}(),a.addEventListener("click",r=>{if(r.button||r.which!==1||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey||r.defaultPrevented)return;const s=Ht(r.composedPath()[0],a);if(!s)return;const{url:n,external:d,target:p}=Lt(s,t);if(!n)return;if(p==="_parent"||p==="_top"){if(window.parent!==window)return}else if(p&&p!=="_self")return;const f=vt(s);if(!(s instanceof SVGAElement)&&n.protocol!==location.protocol&&n.protocol!=="https:"&&n.protocol!=="http:")return;if(d||f.reload)return Ft({url:n,type:"link"})||r.preventDefault(),void(g=!0);const[v,y]=n.href.split("#");if(y!==void 0&&v===location.href.split("#")[0])return M=!0,Ut(L),i.url=n,X.page.set({...j,url:n}),void X.page.notify();yt({url:n,scroll:f.noscroll?bt():null,keepfocus:!1,redirect_chain:[],details:{state:{},replaceState:n.href===location.href},accepted:()=>r.preventDefault(),blocked:()=>r.preventDefault(),type:"link"})}),a.addEventListener("submit",r=>{if(r.defaultPrevented)return;const s=HTMLFormElement.prototype.cloneNode.call(r.target),n=r.submitter;if(((n==null?void 0:n.formMethod)||s.method)!=="get")return;const d=new URL((n==null?void 0:n.hasAttribute("formaction"))&&(n==null?void 0:n.formAction)||s.action);if(Kt(d,t))return;const p=r.target,{noscroll:f,reload:v}=vt(p);if(v)return;r.preventDefault(),r.stopPropagation();const y=new FormData(p),w=n==null?void 0:n.getAttribute("name");w&&y.append(w,(n==null?void 0:n.getAttribute("value"))??""),d.search=new URLSearchParams(y).toString(),yt({url:d,scroll:f?bt():null,keepfocus:!1,redirect_chain:[],details:{state:{},replaceState:!1},nav_token:{},accepted:()=>{},blocked:()=>{},type:"form"})}),addEventListener("popstate",r=>{var s;if((s=r.state)!=null&&s[W]){if(r.state[W]===L)return;const n=r.state[W]-L;yt({url:new URL(location.href),scroll:ht[r.state[W]],keepfocus:!1,redirect_chain:[],details:null,accepted:()=>{L=r.state[W]},blocked:()=>{history.go(-n)},type:"popstate",delta:n})}}),addEventListener("hashchange",()=>{M&&(M=!1,history.replaceState({...history.state,[W]:++L},"",location.href))});for(const r of document.querySelectorAll("link"))r.rel==="icon"&&(r.href=r.href);addEventListener("pageshow",r=>{r.persisted&&X.navigating.set(null)})},_hydrate:async({status:e=200,error:r,node_ids:s,params:n,route:d,data:p,form:f})=>{S=!0;const v=new URL(location.href);let y;({params:n={},route:d={id:null}}=gt(v,!1)||{});try{const w=s.map(async(P,U)=>{const C=p[U];return xt({loader:St[P],url:v,params:n,route:d,parent:async()=>{const D={};for(let $=0;$<U;$+=1)Object.assign(D,(await w[$]).data);return D},server_data_node:Rt(C)})});y=await H({url:v,params:n,branch:await Promise.all(w),status:e,error:r,form:f,route:Ot.find(({id:P})=>P===d.id)??null})}catch(w){if(w instanceof Yt)return void await ut(new URL(w.location,location.href));y=await mt({status:w instanceof Dt?w.status:500,error:await ft(w,{url:v,params:n,route:d}),url:v,route:d})}Q(y)}}}async function Zt(c,t){var m;const a=new URL(c);a.pathname=c.pathname.replace(/\/$/,"")+ve,a.searchParams.append("x-sveltekit-invalidated",t.map(o=>o?"1":"").join("_"));const u=await _t(a.href),l=await u.json();if(!u.ok)throw new Error(l);return(m=l.nodes)==null||m.forEach(o=>{(o==null?void 0:o.type)==="data"&&(o.data=function(i,S){if(typeof i=="number")return x(i,!0);if(!Array.isArray(i)||i.length===0)throw new Error("Invalid input");const b=i,h=Array(b.length);function x(g,M=!1){if(g===Pe)return;if(g===Ue)return NaN;if(g===Ie)return 1/0;if(g===Te)return-1/0;if(g===je)return-0;if(M)throw new Error("Invalid input");if(g in h)return h[g];const _=b[g];if(_&&typeof _=="object")if(Array.isArray(_))if(typeof _[0]=="string"){const L=_[0],V=S==null?void 0:S[L];if(V)return h[g]=V(x(_[1]));switch(L){case"Date":h[g]=new Date(_[1]);break;case"Set":const j=new Set;h[g]=j;for(let O=1;O<_.length;O+=1)j.add(x(_[O]));break;case"Map":const rt=new Map;h[g]=rt;for(let O=1;O<_.length;O+=2)rt.set(x(_[O]),x(_[O+1]));break;case"RegExp":h[g]=new RegExp(_[1],_[2]);break;case"Object":h[g]=Object(_[1]);break;case"BigInt":h[g]=BigInt(_[1]);break;case"null":const F=Object.create(null);h[g]=F;for(let O=1;O<_.length;O+=2)F[_[O]]=x(_[O+1]);break;default:throw new Error(`Unknown type ${L}`)}}else{const L=new Array(_.length);h[g]=L;for(let V=0;V<_.length;V+=1){const j=_[V];j!==Oe&&(L[V]=x(j))}}else{const L={};h[g]=L;for(const V in _){const j=_[V];L[V]=x(j)}}else h[g]=_;return h[g]}return x(0)}(o.data),o.uses={dependencies:new Set(o.uses.dependencies??[]),params:new Set(o.uses.params??[]),parent:!!o.uses.parent,route:!!o.uses.route,url:!!o.uses.url})}),l}function ft(c,t){return c instanceof Dt?c.body:Ae.handleError({error:c,event:t})??{message:t.route.id!=null?"Internal Error":"Not Found"}}function It(){const c=document.querySelector("[autofocus]");if(!c){const t=document.body,a=t.getAttribute("tabindex");return t.tabIndex=-1,t.focus({preventScroll:!0}),a!==null?t.setAttribute("tabindex",a):t.removeAttribute("tabindex"),new Promise(u=>{setTimeout(()=>{var l;u((l=getSelection())==null?void 0:l.removeAllRanges())})})}c.focus()}async function qe({env:c,hydrate:t,paths:a,target:u,version:l}){pe(a),me(l);const m=De({target:u,base:a.base});he({client:m}),t?await m._hydrate(t):m.goto(location.href,{replaceState:!0}),m._start_router()}export{qe as start};
