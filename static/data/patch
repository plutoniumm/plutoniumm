#!/usr/bin/env bash
set -euo pipefail

INDEX_HTML="/app/client/dist/index.html"
STYLESHEET_SNIPPET='<link rel="stylesheet" href="/assets/patch.css">'

ensure_link() {
  if [[ -f "${INDEX_HTML}" ]]; then
    sed -i'' -e "s#</head>#  ${STYLESHEET_SNIPPET}\n</head>#" "${INDEX_HTML}"
    echo "Inserted stylesheet link into index.html"
  else
    echo "Warning: ${INDEX_HTML} not found"
  fi
}

ensure_link